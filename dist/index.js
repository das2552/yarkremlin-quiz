!function(){"use strict";var e=function(e){var t,s,n=e.state,i=e.elements,r=(t=n.activeStepIndex,s=n.stepsCount,"".concat(t+1," из ").concat(s," вопросов"));i.stepsInfo.textContent=r},t=function(e){var t=e.state,s=e.elements;"enabled"===t.disablingStepNavState&&(s.stepNav.disabled=!1),"hidden"===t.visibilityStepNavState&&s.stepNav.classList.add("button_hidden")},s=function(s){var n=function(e){return{state:{score:0,activeStepIndex:0,stepsCount:8,visibilitySubmitButtonState:"hidden",gettingResultProcessState:"idle"},elements:{submitButton:e.querySelector(".quiz__submit"),stepsInfo:e.querySelector(".quiz__steps-info"),steps:Array.from(e.querySelectorAll(".quiz__step")),resultsDataElement:e.querySelector(".quiz__results-data")}}}(s),i=function(t){var s=t.state;return{updateScore:function(){s.score+=1,function(e){var t=e.state;e.elements.resultsDataElement.value=t.score}(t)},updateActiveStep:function(){s.activeStepIndex+=1,e(t),function(e){var t=e.state,s=e.elements,n=s.steps[t.activeStepIndex-1],i=s.steps[t.activeStepIndex];n.classList.remove("quiz__step_shown"),i.classList.add("quiz__step_shown")}(t)},showSubmitButton:function(){s.visibilitySubmitButtonState="shown",function(e){var t=e.state,s=e.elements;"shown"===t.visibilitySubmitButtonState&&s.submitButton.classList.remove("button_hidden"),"processing"===t.gettingResultProcessState&&(s.submitButton.disabled=!0),"finished"===t.gettingResultProcessState&&(s.submitButton.disabled=!1),"failed"===t.gettingResultProcessState&&(s.submitButton.disabled=!0)}(t)},getLastStepIndex:function(){return s.stepsCount-1},isLastStep:function(){return s.activeStepIndex===s.stepsCount-1}}}(n),r=n.state,a=n.elements;r.stepsCount=a.steps.length,e(n),s.addEventListener("submit",(function(e){e.preventDefault()})),a.steps.forEach((function(e,s){!function(e,s,n){var i=function(e){return{state:{correctAnswerIndex:null,selectedAnswerIndex:null,selectedAnswerState:"idle",disablingStepNavState:"disabled",visibilityStepNavState:"shown"},elements:{answersBox:e.querySelector(".quiz__items"),answers:Array.from(e.querySelectorAll(".quiz__item")),fields:Array.from(e.querySelectorAll(".quiz__field")),stepNav:e.querySelector(".quiz__step-nav")}}}(e),r=i.state,a=i.elements,c=a.answers,o=a.fields,u=a.stepNav;r.correctAnswerIndex=function(e){var t;return e.forEach((function(e,s){void 0!==e.dataset.correctAnswer&&(t=s)})),t}(c),u.addEventListener("click",(function(){n.updateActiveStep(),n.isLastStep()&&n.showSubmitButton()})),o.forEach((function(e,s){e.addEventListener("change",(function(){return e=s,void(null===r.selectedAnswerIndex&&(r.selectedAnswerIndex=e,r.disablingStepNavState="enabled",r.selectedAnswerIndex===r.correctAnswerIndex?(r.selectedAnswerState="correct",n.updateScore()):r.selectedAnswerState="incorrect",function(e){var t=e.state,s=e.elements,n=s.answers[t.correctAnswerIndex],i=n.querySelector(".quiz__answer"),r=n.querySelector(".quiz__icon");if("correct"===t.selectedAnswerState&&(n.classList.add("quiz__item_correct"),i.classList.remove("quiz__answer_hidden")),"incorrect"===t.selectedAnswerState){var a=s.answers[t.selectedAnswerIndex],c=a.querySelector(".quiz__answer"),o=a.querySelector(".quiz__icon");a.classList.add("quiz__item_incorrect"),o.classList.add("icon_incorrect"),o.classList.remove("icon_hidden"),c.classList.remove("quiz__answer_hidden")}r.classList.add("icon_correct"),r.classList.remove("icon_hidden"),s.fields.forEach((function(e){e.classList.add("quiz__field_hidden")})),s.answers.forEach((function(e){e.classList.add("quiz__item_disabled"),e.classList.remove("quiz__item_hover")}))}(i),t(i)));var e}))})),s===n.getLastStepIndex()&&(r.visibilityStepNavState="hidden",t(i))}(e,s,i)}))};Array.from(document.querySelectorAll(".quiz")).forEach((function(e){s(e)}))}();
//# sourceMappingURL=index.js.map