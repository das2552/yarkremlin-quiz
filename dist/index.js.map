{"version":3,"file":"index.js","mappings":"yBAAA,ICEA,EAqBmB,SAACA,GAChB,ICxBgCC,EAAmBC,EDwB3CC,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SAETC,GC1B0BJ,ED0BWE,EAAMG,gBC1BEJ,ED0BeC,EAAMI,WCxB1E,UADqBN,EAAoB,EACzC,eAA6BC,EAA7B,cDyBEE,EAASI,UAAUC,YAAcJ,GE3BrC,EAoCiB,SAACL,GACd,IAAQG,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SAEqB,YAAhCD,EAAMO,wBACRN,EAASO,QAAQC,UAAW,GAGO,WAAjCT,EAAMU,wBACRT,EAASO,QAAQG,UAAUC,IAAI,kBCvCrC,WAAgBC,GACd,IAAMC,EJNR,SAAgBD,GAgBd,MAAO,CACLb,MAhBY,CACZe,MAAO,EACPZ,gBAAiB,EACjBC,WAAY,EACZY,4BAA6B,SAC7BC,0BAA2B,QAY3BhB,SATe,CACfiB,aAAcL,EAAQM,cAAc,iBACpCd,UAAWQ,EAAQM,cAAc,qBACjCC,MAAOC,MAAMC,KAAKT,EAAQU,iBAAiB,gBAC3CC,mBAAoBX,EAAQM,cAAc,yBIPxBM,CAAgBZ,GAC9Ba,ECLR,SAAgBZ,GACd,IAAQd,EAAUc,EAAVd,MAsBR,MAAO,CACL2B,YArBkB,WAClB3B,EAAMe,OAAS,EJiCE,SAAClB,GAClB,IAAQG,EAAoBH,EAApBG,MAAoBH,EAAbI,SAENuB,mBAAmBI,MAAQ5B,EAAMe,MInC1Cc,CAAiCf,IAoBjCgB,iBAjBuB,WACvB9B,EAAMG,iBAAmB,EACzB0B,EAA+Bf,GJkBpB,SAACjB,GACZ,IAAQG,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SAET8B,EAAW9B,EAASmB,MAAMpB,EAAMG,gBAAkB,GAClD6B,EAAc/B,EAASmB,MAAMpB,EAAMG,iBACzC4B,EAASpB,UAAUsB,OAAO,oBAC1BD,EAAYrB,UAAUC,IAAI,oBIvB1BiB,CAA2Bf,IAe3BoB,iBAZuB,WACvBlC,EAAMgB,4BAA8B,QJdlB,SAACnB,GACnB,IAAQG,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SAE2B,UAAtCD,EAAMgB,6BACRf,EAASiB,aAAaP,UAAUsB,OAAO,iBAGD,eAApCjC,EAAMiB,4BACRhB,EAASiB,aAAaT,UAAW,GAGK,aAApCT,EAAMiB,4BACRhB,EAASiB,aAAaT,UAAW,GAGK,WAApCT,EAAMiB,4BACRhB,EAASiB,aAAaT,UAAW,GIDnCoB,CAAkCf,IAWlCqB,iBARuB,kBAAMnC,EAAMI,WAAa,GAShDgC,WAPiB,kBAAMpC,EAAMG,kBAAoBH,EAAMI,WAAa,IDhB1CiC,CAAavB,GAEjCd,EAAoBc,EAApBd,MAAOC,EAAaa,EAAbb,SACfD,EAAMI,WAAaH,EAASmB,MAAMkB,OAElCT,EAA+Bf,GAE/BD,EAAQ0B,iBAAiB,UAAU,SAACC,GAClCA,EAAMC,oBAGRxC,EAASmB,MAAMsB,SAAQ,SAACC,EAAMC,IEdhC,SAAgB/B,EAASgC,EAAcnB,GACrC,IAAMoB,ECLR,SAAgBjC,GAgBd,MAAO,CACLb,MAhBY,CACZ+C,mBAAoB,KACpBC,oBAAqB,KACrBC,oBAAqB,OACrB1C,sBAAuB,WACvBG,uBAAwB,SAYxBT,SATe,CACfiD,WAAYrC,EAAQM,cAAc,gBAClCgC,QAAS9B,MAAMC,KAAKT,EAAQU,iBAAiB,gBAC7C6B,OAAQ/B,MAAMC,KAAKT,EAAQU,iBAAiB,iBAC5Cf,QAASK,EAAQM,cAAc,qBDRTkC,CAAoBxC,GACpCb,EAAkD8C,EAAlD9C,MAAR,EAA0D8C,EAA3C7C,SAAYkD,EAA3B,EAA2BA,QAASC,EAApC,EAAoCA,OAAQ5C,EAA5C,EAA4CA,QAE5CR,EAAM+C,mBJH6B,SAACI,GACpC,IAAIG,EAQJ,OANAH,EAAQT,SAAQ,SAACa,EAAQX,QACcY,IAAjCD,EAAOE,QAAQC,gBACjBJ,EAAcV,MAIXU,EINoBK,CAAsBR,GAyBjD3C,EAAQ+B,iBAAiB,SANG,WAC1Bb,EAAoBI,mBAEhBJ,EAAoBU,cAAcV,EAAoBQ,sBAK5DkB,EAAOV,SAAQ,SAACkB,EAAOC,GACrBD,EAAMrB,iBAAiB,UAAU,kBA1BHK,EA0BgCiB,OAzB5B,OAA9B7D,EAAMgD,sBAEVhD,EAAMgD,oBAAsBJ,EAC5B5C,EAAMO,sBAAwB,UAE1BP,EAAMgD,sBAAwBhD,EAAM+C,oBACtC/C,EAAMiD,oBAAsB,UAC5BvB,EAAoBC,eAEpB3B,EAAMiD,oBAAsB,YHnBlB,SAACpD,GACb,IAAQG,EAAoBH,EAApBG,MAAOC,EAAaJ,EAAbI,SACT6D,EAAuB7D,EAASkD,QAAQnD,EAAM+C,oBAC9CgB,EAAkCD,EAAqB3C,cAAc,iBACrE6C,EAA2BF,EAAqB3C,cAAc,eAOpE,GALkC,YAA9BnB,EAAMiD,sBACRa,EAAqBnD,UAAUC,IAAI,sBACnCmD,EAAgCpD,UAAUsB,OAAO,wBAGjB,cAA9BjC,EAAMiD,oBAAqC,CAC7C,IAAMgB,EAAwBhE,EAASkD,QAAQnD,EAAMgD,qBAC/CkB,EAAmCD,EAAsB9C,cAAc,iBACvEgD,EAA4BF,EAAsB9C,cAAc,eAEtE8C,EAAsBtD,UAAUC,IAAI,wBACpCuD,EAA0BxD,UAAUC,IAAI,kBACxCuD,EAA0BxD,UAAUsB,OAAO,eAC3CiC,EAAiCvD,UAAUsB,OAAO,uBAGpD+B,EAAyBrD,UAAUC,IAAI,gBACvCoD,EAAyBrD,UAAUsB,OAAO,eAE1ChC,EAASmD,OAAOV,SAAQ,SAAC0B,GACvBA,EAAYzD,UAAUC,IAAI,yBAG5BX,EAASkD,QAAQT,SAAQ,SAACa,GACxBA,EAAO5C,UAAUC,IAAI,uBACrB2C,EAAO5C,UAAUsB,OAAO,uBGT1BoC,CAAgCvB,GAChCuB,EAAiCvB,KAdJ,IAACF,QA6B5BC,IAAiBnB,EAAoBS,qBACvCnC,EAAMU,uBAAyB,SAC/B2D,EAAiCvB,IFtBjCwB,CAAmB3B,EAAMC,EAAOlB,OIhBbL,MAAMC,KAAKiD,SAAShD,iBAAiB,UAE7CmB,SAAQ,SAAC8B,GACpBC,EAAeD,M","sources":["webpack://webpack-template/./src/blocks/quiz/quizConstructor.js","webpack://webpack-template/./src/blocks/quiz/quizRenderView.js","webpack://webpack-template/./src/blocks/quiz/helpres.js","webpack://webpack-template/./src/blocks/quiz/quizStepRenderView.js","webpack://webpack-template/./src/blocks/quiz/quizController.js","webpack://webpack-template/./src/blocks/quiz/quizMediator.js","webpack://webpack-template/./src/blocks/quiz/quizStepController.js","webpack://webpack-template/./src/blocks/quiz/quizStepConstructor.js","webpack://webpack-template/./src/blocks/quiz/quiz.js"],"sourcesContent":["export default (element) => {\r\n  const state = {\r\n    score: 0,\r\n    activeStepIndex: 0,\r\n    stepsCount: 8,\r\n    visibilitySubmitButtonState: 'hidden',\r\n    gettingResultProcessState: 'idle',\r\n  };\r\n\r\n  const elements = {\r\n    submitButton: element.querySelector('.quiz__submit'),\r\n    stepsInfo: element.querySelector('.quiz__steps-info'),\r\n    steps: Array.from(element.querySelectorAll('.quiz__step')),\r\n    resultsDataElement: element.querySelector('.quiz__results-data'),\r\n  };\r\n\r\n  return {\r\n    state,\r\n    elements,\r\n  };\r\n};\r\n","import { formatQuizStepsInfo } from './helpres';\r\n\r\nexport default {\r\n  renderSubmitButton: (props) => {\r\n    const { state, elements } = props;\r\n\r\n    if (state.visibilitySubmitButtonState === 'shown') {\r\n      elements.submitButton.classList.remove('button_hidden');\r\n    }\r\n\r\n    if (state.gettingResultProcessState === 'processing') {\r\n      elements.submitButton.disabled = true;\r\n    }\r\n\r\n    if (state.gettingResultProcessState === 'finished') {\r\n      elements.submitButton.disabled = false;\r\n    }\r\n\r\n    if (state.gettingResultProcessState === 'failed') {\r\n      elements.submitButton.disabled = true;\r\n    }\r\n  },\r\n\r\n  renderStepsInfo: (props) => {\r\n    const { state, elements } = props;\r\n\r\n    const stepsInfoValue = formatQuizStepsInfo(state.activeStepIndex, state.stepsCount);\r\n    elements.stepsInfo.textContent = stepsInfoValue;\r\n  },\r\n\r\n  renderSteps: (props) => {\r\n    const { state, elements } = props;\r\n\r\n    const prevStep = elements.steps[state.activeStepIndex - 1];\r\n    const currentStep = elements.steps[state.activeStepIndex];\r\n    prevStep.classList.remove('quiz__step_shown');\r\n    currentStep.classList.add('quiz__step_shown');\r\n  },\r\n\r\n  renderResultsData: (props) => {\r\n    const { state, elements } = props;\r\n\r\n    elements.resultsDataElement.value = state.score;\r\n  },\r\n};\r\n","export const formatQuizStepsInfo = (currentPointIndex, pointsCount) => {\r\n  const currentPoint = currentPointIndex + 1;\r\n  return `${currentPoint} из ${pointsCount} вопросов`;\r\n};\r\n\r\nexport const getCorrectAnswerIndex = (answers) => {\r\n  let answerIndex;\r\n\r\n  answers.forEach((answer, index) => {\r\n    if (answer.dataset.correctAnswer !== undefined) {\r\n      answerIndex = index;\r\n    }\r\n  });\r\n\r\n  return answerIndex;\r\n};\r\n","export default {\r\n  renderAnswer: (props) => {\r\n    const { state, elements } = props;\r\n    const correctAnswerElement = elements.answers[state.correctAnswerIndex];\r\n    const correctAnswerDescriptionElement = correctAnswerElement.querySelector('.quiz__answer');\r\n    const correntAnswerIconElement = correctAnswerElement.querySelector('.quiz__icon');\r\n\r\n    if (state.selectedAnswerState === 'correct') {\r\n      correctAnswerElement.classList.add('quiz__item_correct');\r\n      correctAnswerDescriptionElement.classList.remove('quiz__answer_hidden');\r\n    }\r\n\r\n    if (state.selectedAnswerState === 'incorrect') {\r\n      const selectedAnswerElement = elements.answers[state.selectedAnswerIndex];\r\n      const selectedAnswerDescriptionElement = selectedAnswerElement.querySelector('.quiz__answer');\r\n      const selectedAnswerIconElement = selectedAnswerElement.querySelector('.quiz__icon');\r\n\r\n      selectedAnswerElement.classList.add('quiz__item_incorrect');\r\n      selectedAnswerIconElement.classList.add('icon_incorrect');\r\n      selectedAnswerIconElement.classList.remove('icon_hidden');\r\n      selectedAnswerDescriptionElement.classList.remove('quiz__answer_hidden');\r\n    }\r\n\r\n    correntAnswerIconElement.classList.add('icon_correct');\r\n    correntAnswerIconElement.classList.remove('icon_hidden');\r\n\r\n    elements.fields.forEach((answerField) => {\r\n      answerField.classList.add('quiz__field_hidden');\r\n    });\r\n\r\n    elements.answers.forEach((answer) => {\r\n      answer.classList.add('quiz__item_disabled');\r\n      answer.classList.remove('quiz__item_hover');\r\n    });\r\n  },\r\n\r\n  renderStepNav: (props) => {\r\n    const { state, elements } = props;\r\n\r\n    if (state.disablingStepNavState === 'enabled') {\r\n      elements.stepNav.disabled = false;\r\n    }\r\n\r\n    if (state.visibilityStepNavState === 'hidden') {\r\n      elements.stepNav.classList.add('button_hidden');\r\n    }\r\n  },\r\n};\r\n","import quizConstructor from './quizConstructor';\r\nimport quizRenderView from './quizRenderView';\r\nimport quizStepController from './quizStepController';\r\nimport quizMediator from './quizMediator';\r\n\r\nexport default (element) => {\r\n  const quizInstace = quizConstructor(element);\r\n  const quizInstaceMediator = quizMediator(quizInstace);\r\n\r\n  const { state, elements } = quizInstace;\r\n  state.stepsCount = elements.steps.length;\r\n\r\n  quizRenderView.renderStepsInfo(quizInstace);\r\n\r\n  element.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n  });\r\n\r\n  elements.steps.forEach((step, index) => {\r\n    quizStepController(step, index, quizInstaceMediator);\r\n  });\r\n};\r\n","import quizRenderView from './quizRenderView';\r\n\r\nexport default (quizInstace) => {\r\n  const { state } = quizInstace;\r\n\r\n  const updateScore = () => {\r\n    state.score += 1;\r\n    quizRenderView.renderResultsData(quizInstace);\r\n  };\r\n\r\n  const updateActiveStep = () => {\r\n    state.activeStepIndex += 1;\r\n    quizRenderView.renderStepsInfo(quizInstace);\r\n    quizRenderView.renderSteps(quizInstace);\r\n  };\r\n\r\n  const showSubmitButton = () => {\r\n    state.visibilitySubmitButtonState = 'shown';\r\n    quizRenderView.renderSubmitButton(quizInstace);\r\n  };\r\n\r\n  const getLastStepIndex = () => state.stepsCount - 1;\r\n\r\n  const isLastStep = () => state.activeStepIndex === state.stepsCount - 1;\r\n\r\n  return {\r\n    updateScore,\r\n    updateActiveStep,\r\n    showSubmitButton,\r\n    getLastStepIndex,\r\n    isLastStep,\r\n  };\r\n};\r\n","import quizStepConstructor from './quizStepConstructor';\r\nimport quizStepRenderView from './quizStepRenderView';\r\nimport { getCorrectAnswerIndex } from './helpres';\r\n\r\nexport default (element, elementIndex, quizInstaceMediator) => {\r\n  const quizStepInstace = quizStepConstructor(element);\r\n  const { state, elements: { answers, fields, stepNav } } = quizStepInstace;\r\n\r\n  state.correctAnswerIndex = getCorrectAnswerIndex(answers);\r\n\r\n  const stepFieldChangeHandler = (index) => {\r\n    if (state.selectedAnswerIndex !== null) return;\r\n\r\n    state.selectedAnswerIndex = index;\r\n    state.disablingStepNavState = 'enabled';\r\n\r\n    if (state.selectedAnswerIndex === state.correctAnswerIndex) {\r\n      state.selectedAnswerState = 'correct';\r\n      quizInstaceMediator.updateScore();\r\n    } else {\r\n      state.selectedAnswerState = 'incorrect';\r\n    }\r\n\r\n    quizStepRenderView.renderAnswer(quizStepInstace);\r\n    quizStepRenderView.renderStepNav(quizStepInstace);\r\n  };\r\n\r\n  const stepNavClickHandler = () => {\r\n    quizInstaceMediator.updateActiveStep();\r\n\r\n    if (quizInstaceMediator.isLastStep()) quizInstaceMediator.showSubmitButton();\r\n  };\r\n\r\n  stepNav.addEventListener('click', stepNavClickHandler);\r\n\r\n  fields.forEach((field, fieldIndex) => {\r\n    field.addEventListener('change', () => stepFieldChangeHandler(fieldIndex));\r\n  });\r\n\r\n  if (elementIndex === quizInstaceMediator.getLastStepIndex()) {\r\n    state.visibilityStepNavState = 'hidden';\r\n    quizStepRenderView.renderStepNav(quizStepInstace);\r\n  }\r\n};\r\n","export default (element) => {\r\n  const state = {\r\n    correctAnswerIndex: null,\r\n    selectedAnswerIndex: null,\r\n    selectedAnswerState: 'idle',\r\n    disablingStepNavState: 'disabled',\r\n    visibilityStepNavState: 'shown',\r\n  };\r\n\r\n  const elements = {\r\n    answersBox: element.querySelector('.quiz__items'),\r\n    answers: Array.from(element.querySelectorAll('.quiz__item')),\r\n    fields: Array.from(element.querySelectorAll('.quiz__field')),\r\n    stepNav: element.querySelector('.quiz__step-nav'),\r\n  };\r\n\r\n  return {\r\n    state,\r\n    elements,\r\n  };\r\n};\r\n","import quizController from './quizController';\r\n\r\nexport default () => {\r\n  const quizElements = Array.from(document.querySelectorAll('.quiz'));\r\n\r\n  quizElements.forEach((quizElement) => {\r\n    quizController(quizElement);\r\n  });\r\n};\r\n"],"names":["props","currentPointIndex","pointsCount","state","elements","stepsInfoValue","activeStepIndex","stepsCount","stepsInfo","textContent","disablingStepNavState","stepNav","disabled","visibilityStepNavState","classList","add","element","quizInstace","score","visibilitySubmitButtonState","gettingResultProcessState","submitButton","querySelector","steps","Array","from","querySelectorAll","resultsDataElement","quizConstructor","quizInstaceMediator","updateScore","value","quizRenderView","updateActiveStep","prevStep","currentStep","remove","showSubmitButton","getLastStepIndex","isLastStep","quizMediator","length","addEventListener","event","preventDefault","forEach","step","index","elementIndex","quizStepInstace","correctAnswerIndex","selectedAnswerIndex","selectedAnswerState","answersBox","answers","fields","quizStepConstructor","answerIndex","answer","undefined","dataset","correctAnswer","getCorrectAnswerIndex","field","fieldIndex","correctAnswerElement","correctAnswerDescriptionElement","correntAnswerIconElement","selectedAnswerElement","selectedAnswerDescriptionElement","selectedAnswerIconElement","answerField","quizStepRenderView","quizStepController","document","quizElement","quizController"],"sourceRoot":""}